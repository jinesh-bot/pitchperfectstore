<!-- Spinner Component -->
<div id="loadingSpinner" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-[60] hidden">
    <div class="flex flex-col items-center justify-center h-full">
        <!-- Animated Logo Spinner -->
        <div class="relative">
            <!-- Outer rotating circle -->
            <div class="w-20 h-20 border-4 border-[#DCFCE7] rounded-full animate-spin"></div>
            <!-- Inner pulsing logo -->
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <span class="text-2xl font-bold italic text-[#DCFCE7] animate-pulse">PP</span>
            </div>
        </div>
        
        <!-- Loading Text -->
        <div class="mt-4 text-white text-center">
            <p class="text-lg font-semibold animate-pulse">Loading</p>
            <div class="flex justify-center mt-2 space-x-1">
                <div class="w-2 h-2 bg-[#DCFCE7] rounded-full animate-bounce" style="animation-delay: 0s"></div>
                <div class="w-2 h-2 bg-[#DCFCE7] rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                <div class="w-2 h-2 bg-[#DCFCE7] rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
            </div>
        </div>
    </div>
</div>

<script>
    function showSpinner() {
        document.getElementById('loadingSpinner').classList.remove('hidden');
        document.getElementById('loadingSpinner').classList.add('flex');
    }

    function hideSpinner() {
        document.getElementById('loadingSpinner').classList.add('hidden');
        document.getElementById('loadingSpinner').classList.remove('flex');
    }

    // Show spinner before page unload
    window.addEventListener('beforeunload', () => {
        showSpinner();
    });

    // Example usage for fetch requests
    async function fetchWithSpinner(url, options) {
        showSpinner();
        try {
            const response = await fetch(url, options);
            const data = await response.json();
            return data;
        } finally {
            hideSpinner();
        }
    }
</script>